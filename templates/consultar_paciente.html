<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consultar Paciente - Dev Healthy</title>
    <link rel="stylesheet" href="/static/consultar_paciente/consultar_paciente.css">
    <link rel="stylesheet" href="/static/Home/home.css"> <!-- Adicione o CSS do home para o Navbar -->
</head>
<body>
    <!-- Barra de Navegação -->
    <nav class="navbar">
        <div class="navbar-brand">
            <a href="/"><img src="/static/Home/imagens/Captura_de_tela_2024-11-02_124301-removebg-preview.png" alt="Dev Healthy"></a>
        </div>
        <div class="navbar-menu">
            <a href="/cadastrar_paciente"><button class="menu-button">Cadastrar Paciente</button></a>|
            <a href="/consultar_paciente"><button class="menu-button">Consultar Paciente</button></a>|
            <a href="/criar_exame"><button class="menu-button">Criar Exame</button></a>|
            <a href="/consultar_exame"><button class="menu-button">Consultar Exame</button></a>
        </div>
        <div class="offcanvas" id="offcanvasMenu">
            <button class="close" onclick="toggleMenu('offcanvasMenu')">✖</button>
            <a href="/"><button class="menu-button">Home</button></a>
            <a href="/cadastrar_paciente"><button class="menu-button">Cadastrar Paciente</button></a>
            <a href="/consultar_paciente"><button class="menu-button">Consultar Paciente</button></a>
            <a href="/criar_exame"><button class="menu-button">Criar Exame</button></a>
            <a href="/consultar_exame"><button class="menu-button">Consultar Exame</button></a>
        </div>
        <button class="offcanvas-toggle" onclick="toggleMenu('offcanvasMenu')">☰</button>
    </nav>

    <div class="container">
        <h2>Consultar Paciente</h2>
        <form id="formConsultarPaciente">
            <label for="cpfPaciente">CPF:</label>
            <input type="text" id="cpfPaciente" required>
            <button id="botao_buscar" type="button" onclick="consultarPaciente()">Buscar</button>
        </form>
        <div id="resultadoConsulta"></div>
    </div>

    <script>
        function consultarPaciente() {
            const cpf = document.getElementById('cpfPaciente').value;

            fetch(`/consultar-paciente/${cpf}`, {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json'
                }
            })
            .then(response => response.json())
            .then(data => {
                const resultadoDiv = document.getElementById('resultadoConsulta');
                if (data.error) {
                    resultadoDiv.innerHTML = `<p>${data.error}</p>`;
                } else {
                    resultadoDiv.innerHTML = `
                        <div class="resultado-consulta">
                            <p><strong>Nome:</strong> ${data.nome || 'N/A'}</p>
                            <p><strong>Data de Nascimento:</strong> ${data.dataNascimento || 'N/A'}</p>
                            <p><strong>Sexo:</strong> ${data.sexo || 'N/A'}</p>
                            <p><strong>Estado:</strong> ${data.endereco.estado || 'N/A'}</p>
                            <p><strong>Cidade:</strong> ${data.endereco.cidade || 'N/A'}</p>
                            <p><strong>Rua:</strong> ${data.endereco.rua || 'N/A'}</p>
                            <p><strong>Número:</strong> ${data.endereco.numero || 'N/A'}</p>
                            <p><strong>CEP:</strong> ${data.endereco.cep || 'N/A'}</p>
                            <p><strong>CPF:</strong> ${data.cpf || 'N/A'}</p>
                        </div>
                    `;
                }
            })
            .catch(error => {
                console.error('Erro ao consultar paciente:', error);
            });
        }
    </script>
</body>
</html>